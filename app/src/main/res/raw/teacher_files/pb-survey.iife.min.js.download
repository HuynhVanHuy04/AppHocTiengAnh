window.polarbyte||(polarbyte={}),polarbyte.survey="0.16.0";var polarbytesurvey=function(){"use strict";var e,t,n;!function(e){e.CHANGE_FORM="change_form",e.FOCUS_FORM="focus_form",e.SUBMIT_FORM="submit_form"}(e||(e={})),function(e){e.BOTTOM_RIGHT="BOTTOM_RIGHT",e.BOTTOM_RIGHT_BETA="BOTTOM_RIGHT_BETA",e.BOTTOM_LEFT="BOTTOM_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.TOP_LEFT="TOP_LEFT",e.CENTERED="CENTERED",e.INLINE="INLINE"}(t||(t={})),function(e){e.POPUP="POPUP",e.INLINE="INLINE",e.LINK="LINK"}(n||(n={}));const i=()=>window.location.search.includes("isDebug=true"),o=e=>{i()&&console.log(e)},s=(e,t)=>{i()&&console.error(e,t)},r=function(e){const t=document.cookie.split(";");for(let n=0;n<t.length;n++){const i=t[n].trim();if(i.startsWith(e+"="))return i.substring(e.length+1)}return null},a=function(e,t){return!!e&&(t?!t():!function(){const e=r("OptanonConsent");if(null!==e){const t=decodeURIComponent(e).split("&");let n="";for(const e of t){const[t,i]=e.split("=");if("groups"===t){n=i;break}}const i=n.split(",");let o="";for(const e of i){const[t,n]=e.split(":");if("C0002"===t){o=n;break}}return console.log("Value of C0002:",o),1==+o}return console.log("Cookie not found"),null}())},l=e=>{let t;try{t=window[e];const n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}};function d(e){const t=new RegExp((e||"_sp_")+"id\\.[a-f0-9]+=([^;]+);?"),n=document.cookie.match(t);if(n&&n[1]){const e=n[1].split(".");return{domain_userid:e[0],domain_sessionidx:e[2],domain_sessionid:e[5]}}return!1}function c(e){const t=new RegExp((e||"_sp_")+"id\\.[a-f0-9]+=([^;]+);?"),n=document.cookie.match(t);return!(!n||!n[1])&&function(e){const t=e.split("."),n={domainUserid:t[0]};for(let e=1;e<t.length;e++){const i=t[e];let o;if(1===e||2===e||3===e||4===e||8===e)try{o=parseInt(i,10),isNaN(o)&&(o=void 0)}catch(t){s(`Failed to parse Snowplow id at index ${e}`)}switch(e){case 1:n.createdTime=o;break;case 2:n.visitCount=o;break;case 3:n.nowTime=o;break;case 4:n.lastVisitTime=o;break;case 5:n.sessionId=i;break;case 6:n.previousSessionId=i;break;case 7:n.firstEventId=i;break;case 8:n.firstEventTsInMs=o;break;case 9:n.eventIndex=o}}return n}(n[1])}const u="survey",p="v2",m=window.polarbyteConfig,g="~1.12.24";let f=0;const y=e=>{const t=Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e);l("localStorage")?localStorage.setItem("pbstet",t):function(e,t,n){const i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);const o="expires="+i.toUTCString();document.cookie=`${e}=${t}; path=/; ${o}`}("pbstet",t,730)},v=()=>{let e=Date.now(),t=0;f=(()=>{let e;if(e=l("sessionStorage")?sessionStorage.getItem("pbstet"):r("pbstet"),null!=e)try{const t=parseInt(e,10);if(!isNaN(t))return t}catch(t){s(`Failed to parse pbstet value: ${e}`)}return 0})(),o(`Previous total engaged time value: ${f}`);setInterval((()=>{if(null!==e){const n=Date.now();t+=n-e,e=document.hidden?null:n,f+=Math.round(t/1e3),y(f)}}),1e3),document.addEventListener("visibilitychange",(()=>{const n=Date.now();document.hidden?(t+=n-e,e=null):null===e&&(e=n)}))},b=async(e,t,n=!1)=>{try{o(`Fetching campaign ${t}`);const i=await fetch(`${e}/api/${p}/campaigns/${t}${n?"?skipCache=true":""}`,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json"}});if(i.ok)return await i.json();s("An error occurred while fetching campaign")}catch(e){s(`An error occurred while fetching campaign  ${t}`,e)}return null},h=async(e,t,n)=>{try{o(`Fetching campaigns for project ${t} (${p})`);const i=await fetch(`${e}/api/${p}/campaigns/list`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:t,attributes:n})});if(i.ok)return await i.json();s(`Failed to fetch campaigns for project ${t}: status: ${i.status}`)}catch(e){s(`An error occurred while fetching campaigns for ${t}`)}return null},w=(e,t)=>{const n=document.createElement("script");n.type="text/javascript",n.onload=function(){o(`Script loaded: ${e}`),t()},n.src=e;const i=document.getElementsByTagName("head");i&&i[0].appendChild(n)},C=(e,t)=>{const n=document.createElement("link");n.onload=function(){o(`Style loaded: ${e}`),t()},n.type="text/css",n.rel="stylesheet",n.href=e,(document.head||document.documentElement).appendChild(n)};let S=!1,T=!1;const $=[],E=e=>{T?(o("Client stylesheet already loaded."),e()):($.push(e),S?o("Client stylesheet is already loading."):(S=!0,C(M(),(()=>{T=!0,S=!1,o(`Calling ${$.length} client stylesheet loaded callbacks.`);for(const e of $)e();$.length=0}))))},I={};let O=!1,x=!1;const _=[],k=e=>{x?(o("Client scripts already loaded."),e()):O?(o("Client script already loading."),e()):(_.push(e),O=!0,w(R(),(()=>{x=!0,o(`Calling ${_.length} client script callbacks.`);for(const e of _)e();_.length=0,O=!1})))},N=()=>{window.jQuery&&window.jQuery.ui?(o("jQuery UI is already loaded!"),I.jqueryui=!0,I.jqueryuicss=!0):(w("https://code.jquery.com/ui/1.13.2/jquery-ui.js",(()=>{I.jqueryui=!0})),C("https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css",(()=>{I.jqueryuicss=!0})))};let j=!1,D=!1;const A=[],P=e=>{j?e():(A.push(e),D?o("Skip loading SurveyJS Scripts as they are already being loaded"):(D=!0,I.jquery=!1,I.jqueryui=!1,I.jqueryuicss=!1,window.jQuery?(o("jQuery is already loaded!"),I.jquery=!0,N()):w("https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js",(()=>{I.jquery=!0,N()})),I.surveyJsCore=!1,I.surveyJsTheme=!1,I.surveyJsI18n=!1,I.surveyCss=!1,I.surveyUi=!1,w(`https://unpkg.com/survey-core@${g}/survey.core${i()?"":".min"}.js`,(()=>{I.surveyJsCore=!0,w(`https://unpkg.com/survey-core@${g}/themes/index${i()?"":".min"}.js`,(()=>{I.surveyJsTheme=!0})),w(`https://unpkg.com/survey-core@${g}/survey.i18n${i()?"":".min"}.js`,(()=>{I.surveyJsI18n=!0})),w(`https://unpkg.com/survey-js-ui@${g}/survey-js-ui${i()?"":".min"}.js`,(()=>{I.surveyUi=!0})),C(`https://unpkg.com/survey-core@${g}/defaultV2${i()?"":".min"}.css`,(()=>{I.surveyCss=!0}))})),(()=>{o("Waiting for scripts to be loaded");const e={},t=(new Date).getTime(),n=setInterval((()=>{let i=!0;for(const[t,n]of Object.entries(I))if(Object.prototype.hasOwnProperty.call(e,t)&&n===e[t]||(e[t]=n,o(`Script ${t} load state: ${n}`)),!n){i=!1;break}if(i){j=!0;const e=(new Date).getTime()-t;o(`Finished waiting for scripts to load. (${e} ms.)`),clearInterval(n),o(`Calling ${A.length} callbacks`);for(const e of A)e();D=!1,A.length=0}}),50)})()))},L=e=>{if(document.getElementById("pbSurveyContainer"))o("pbSurveyContainer element was not created");else{const t=document.createElement("div");t.setAttribute("id","pbSurveyContainer"),t.setAttribute("data-campaign-id",e.id),(document.body||document.documentElement).appendChild(t)}},U=(e,t,n,i)=>{var o;void 0===t.surveyJson?b(e,t.id).then((t=>{var o;null===(o=window.polarbytesurveyclient)||void 0===o||o.displaySurvey(e,t,n,i)})):null===(o=window.polarbytesurveyclient)||void 0===o||o.displaySurvey(e,t,n,i)};let F=!1;const M=()=>{let e="/pb-survey-client.css";const t=document.getElementsByTagName("script");let n;if(t)for(let e=0;!n&&e<t.length;e++){const i=t.item(e).getAttribute("src");i&&i.includes("pb-survey")&&(n=i)}if(n){const t=n.lastIndexOf("/");e=n.substring(0,t)+e}return e},R=()=>{let e=i()?"/pb-survey-client.iife.js":"/pb-survey-client.iife.min.js";const t=document.getElementsByTagName("script");let n;if(t)for(let e=0;!n&&e<t.length;e++){const i=t.item(e).getAttribute("src");i&&i.includes("pb-survey")&&(n=i)}if(n){const t=n.lastIndexOf("/");e=n.substring(0,t)+e}return e},q=()=>{var e;if(l("localStorage")){const t=window.localStorage.getItem("SurveyStorageItems");if(t){return null!==(e=JSON.parse(t).displayedCampaignsIds)&&void 0!==e?e:[]}}return[]},H=()=>{var e;if(l("sessionStorage")){const t=window.sessionStorage.getItem("SurveyStorageItems");if(t){return null!==(e=JSON.parse(t).closedCampaignsIds)&&void 0!==e?e:[]}}return[]},B=()=>{let e={};if(l("localStorage")){const t=window.localStorage.getItem("pbCampaignsDisplayed");e=t?JSON.parse(t):{}}return e},J=e=>{const t=document.querySelectorAll(e.inlineElementSelector);if(!t)return!1;{let n=!1,i=!1,s=0;for(let r=0;r<t.length;r++){const a=t.item(r);if(a){const t=a.dataset.pbInlineContainerId;if(void 0===t){s+=1,n=!0;break}t===e.id?(i=!0,o(`Campaign ${e.id} already displayed in an element`)):o(`Campaign ${e.id}: Element found '${e.inlineElementSelector}' in the document but already used to display campaing ${t}`)}}if(n&&!i)return o(`Campaign ${e.id}: ${s} element(s) found for selector '${e.inlineElementSelector}' in the document. Using it to display campaign`),!0}},G=()=>{try{const e=window.sessionStorage.getItem("pbNewSession");return o(`isNewSession = ${!e}`),!e}catch(e){return s("Failed to retrieve new session state"),!0}},Q=()=>{try{o("Setting new session"),window.sessionStorage.setItem("pbNewSession","true")}catch(e){s("Failed to set new session")}},V=()=>{const e=navigator.userAgent.toLowerCase();return/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(e)?"tablet":/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(e)?"mobile":"desktop"},W=()=>"true"===new URLSearchParams(window.location.search).get("prelive"),z=e=>{if(e<=0)return o("ðŸ“… Recontact waiting days not configured."),!0;const t=(()=>{if(l("localStorage")){const e=window.localStorage.getItem("pbSurveyTimestamp");if(e)try{const t=Date.parse(e);return new Date(t)}catch(e){s("Failed to parse pbSurveyTimestamp")}}return null})();if(null==t)return o("ðŸ“… No last shown date available."),!0;const n=new Date(t.getTime()+24*e*60*60*1e3),i=new Date;return n>i?(o(`ðŸ“… User cannot be recontacted yet (${n.toJSON()} > ${i.toJSON()}).`),!1):(o(`ðŸ“… User can be recontacted as (${n.toJSON()} <= ${i.toJSON()}).`),!0)},K=(e,t,n)=>{var i,s,r;if(e)if("EXIT_TO_DESKTOP"===(null===(i=e.clientConfiguration)||void 0===i?void 0:i.trigger))((e,t,n)=>{if("undefined"!=typeof document&&!F){o("Setting up exit listener");const i=()=>{o("onmouseleave"),U(e,t,n),document.querySelector("body").removeEventListener("mouseleave",i),F=!1};document.querySelector("body").addEventListener("mouseleave",i),window.addEventListener("beforeunload",(()=>{o("Unloading"),F&&(F=!1,document.querySelector("body").removeEventListener("mouseleave",i))})),F=!0}})(t,e,n);else{(null!==(r=null===(s=e.clientConfiguration)||void 0===s?void 0:s.displayDelay)&&void 0!==r?r:0)>0?((e,t,n)=>{var i,s;const r=null!==(s=null===(i=null==t?void 0:t.clientConfiguration)||void 0===i?void 0:i.displayDelay)&&void 0!==s?s:1;o(`ðŸ•‘ Setting survey to be displayed after ${r} seconds.`),setTimeout((()=>{o(`ðŸ•‘ Displaying campaign ${t.id}`),U(e,t,n)}),1e3*r)})(t,e,n):U(t,e,n)}},X=(e,t,n,i)=>{e&&U(t,e,n,i)},Y=(e,t)=>{var n;try{const i={page:{locale:!0,section:!0,scenario:!0},registeredUser:{userId:!0,firstLanguage:!0,country:!0,activity:!0,age:!0,gender:!0,level:!0},...null===(n=t.survey)||void 0===n?void 0:n.contexts};if(i.page&&t.pageContext)for(const[n,o]of Object.entries(t.pageContext))!0===i.page[n]&&(e[`context.page.${n}`]=o);if(i.entry&&t.entryContext)for(const[n,o]of Object.entries(t.entryContext))!0===i.entry[n]&&(e[`context.entry.${n}`]=o);if(i.product&&t.productContext)for(const[n,o]of Object.entries(t.productContext))!0===i.product[n]&&(e[`context.product.${n}`]=o);if(i.registeredUser&&t.registeredUser)for(const[n,o]of Object.entries(t.registeredUser))i.registeredUser[n]&&(e[`context.registeredUser.${n}`]=o)}catch(e){s("Failed to populate user attributes with context",e)}return e},Z=(e,t)=>{o(`Appending debug data for ${t.name} (${t.id})`);const n=document.createElement("div"),i=document.createElement("div"),s=document.createElement("span");s.setAttribute("style","font-family: sans-serif; font-weight: bold; color: "+(t.matches?"green":"red")),s.innerHTML=`${t.name} (${t.id}): ${t.matches?"&check;":"&cross;"}`,i.appendChild(s),n.appendChild(i);const r=document.createElement("ul");n.appendChild(r);for(const e of t.targetingSegmentsMatchResults){const t=document.createElement("li"),n=document.createElement("span");n.setAttribute("style","font-family: sans-serif; font-weight: normal"),t.appendChild(n);const i=document.createElement("span");i.setAttribute("style",`color: ${e.matches?"green":"red"}; font-weight: bold`),i.innerHTML=e.matches?"&check;":"&cross;",n.appendChild(i);const o=document.createElement("span");o.setAttribute("style","font-weight: bold;"),o.innerHTML=`&nbsp;${e.name}:&nbsp;`,n.appendChild(o);const s=document.createElement("span");s.innerHTML=e.reason,n.appendChild(s),r.appendChild(t)}n.appendChild(r),e.appendChild(n)};let ee,te;const ne=()=>{if(void 0!==te)return void o("Mutation observer already configured");o("Setting up mutation observer");let e=(new Date).getTime(),t=!1;const n=[],i=()=>{o("Processing mutations during idle");let i=!1;for(const e of n)if(e.addedNodes.length>0||e.removedNodes.length>0){i=!0;break}if(i&&!t){t=!0;const n=(new Date).getTime(),i=n-e>6e4;i&&(e=n),o(`DOM changed, refreshing inline items with update = ${i}`),oe(i).finally((()=>{t=!1}))}else t&&o("Skipping inline refresh as it is already running");n.length=0};te=new MutationObserver((e=>{n.length||requestIdleCallback(i),n.push(...e)})),te.observe(document.body,{childList:!0,subtree:!0})},ie=async()=>{var e,t,i,r;o("Polarbyte Survey: Init..."),(()=>{let e=0;if(l("sessionStorage")){const t=window.sessionStorage.getItem("pbspv");if(t)try{e=parseInt(t,16),isNaN(e)&&(e=0)}catch(e){s("Failed to retrieve page views from session",e)}const n=e+1;return window.sessionStorage.setItem("pbspv",n.toString(16)),n}})(),a(m.anonymousTrackingEnabled,m.userHasConsented)?o("Skipping engagement timer"):v();const u=null==m?void 0:m.survey,p=null!==(e=null==u?void 0:u.enabled)&&void 0!==e&&e,g=null!==(t=null==u?void 0:u.apiHost)&&void 0!==t?t:"https://dev.polarbyte.com/webapps-api",y=null==u?void 0:u.projectName,C=d(),S=se();if(m&&m.onLoad&&m.onLoad("survey",re()),p){if(await(async e=>{var t;const i=new URLSearchParams(window.location.search),o={url:window.location.href,device:V()};if(i.has("test_campaign")){const s=i.get("test_campaign"),r=await b(e,s,!0);if(r)return r.clientConfiguration=null!==(t=r.clientConfiguration)&&void 0!==t?t:{},r.clientConfiguration.isPreview=!0,P((()=>{r.campaignType===n.POPUP&&L(r),w(R(),(()=>{r.campaignType===n.POPUP?K(r,e,o):X(r,e,o)}))})),!0}return!1})(g))return;if(!y)return void s("Survey module is enabled, but no project is configured");if(navigator.userAgent.toLowerCase().includes("headless"))return void o(`The browser is in headless mode; disabling surveys (${navigator.userAgent})`);const e={url:window.location.href,device:V(),pageViews:S,...null==u?void 0:u.userAttributes};(e=>{const t=a(m.anonymousTrackingEnabled,m.userHasConsented),n=c();var i;n&&n.visitCount&&(e.ENGAGEMENT_SESSION_GROUP=((e,t)=>t?0:e>=8?5:e>=5?4:e>=3?3:2===e?2:1)(n.visitCount,t)),t||(e.ENGAGED_TIME_GROUP=(i=f)>=420?5:i>=180?4:i>=70?3:i>=10?2:1)})(e),Y(e,m),C&&C.domain_userid&&(e.domain_userid=C.domain_userid),W()&&(e.prelive=!0);const t=await h(g,y,e);ee=t,W()&&t&&t.debugData&&(e=>{o("Appending debug data");const t=document.createElement("div");t.setAttribute("id","__pbCampaignDebugData__"),t.setAttribute("style","position: fixed; width: 50vw; height: 50vh; z-index: 1000000000; top: 25vh; left: 25vw; background-color: white; border-radius: 16px;");const n=document.createElement("div");n.setAttribute("style","font-weight: bold; text-align: center; font-family: sans-serif; border-bottom: solid 1px black; background-color: lightgray; padding: 4px; border-top-left-radius: 16px; border-top-right-radius: 16px;"),n.innerHTML="Pre-live targeting details",t.appendChild(n);const i=document.createElement("div");i.setAttribute("style","padding: 4px;overflow: auto;height: 40vh;border-left: solid 1px black;border-right: solid 1px black;"),t.appendChild(i);for(const t of e)Z(i,t);const s=document.createElement("div");s.setAttribute("style","border-bottom: solid 1px black; border-left: solid 1px black; border-right: solid 1px black; border-bottom-left-radius: 16px; border-bottom-right-radius: 16px; text-align: center;padding: 4px;");const r=document.createElement("button");r.setAttribute("onclick",'document.getElementById("__pbCampaignDebugData__").setAttribute("style", "display:none");'),r.innerHTML="Close",s.appendChild(r),t.appendChild(s),document.body.append(t)})(t.debugData);let l=!0;if(t&&t.campaigns){const r=null!==(i=t.configurationDetails.recontactWaitingDays)&&void 0!==i?i:0,a=t.campaigns,d=((e,t)=>{var i,s,r;if(z(t)){if(e){const t=q(),a=B(),l=H(),d=e.filter((e=>e.campaignType===n.POPUP));for(const e of d){const n=null!==(i=a[e.id])&&void 0!==i?i:0;if(e.clientConfiguration.maxDisplay&&e.clientConfiguration.maxDisplay>0&&n>=e.clientConfiguration.maxDisplay)o(`Campaign ${e.id} max display ${n} >= ${e.clientConfiguration.maxDisplay}`);else if(t.includes(e.id))o(`Campaign ${e.id} was already completed.`);else if(l.includes(e.id))o(`Campaign ${e.id} has been closed by the user, skipping it.`);else{const t=null!==(r=null===(s=e.clientConfiguration)||void 0===s?void 0:s.trigger)&&void 0!==r?r:"";if(o(`Campaign trigger: ${t}`),"NEW_SESSION"!==t)return e;if(G())return Q(),e;o(`Skipping campaign ${e.id} as it's not a new session`)}}}return null}})(a,r),c=(e=>{var t;const i=[];if(e){const s=q(),r=B(),a=H(),l=e.filter((e=>e.campaignType===n.INLINE));for(const e of l){const n=null!==(t=r[e.id])&&void 0!==t?t:0;e.clientConfiguration.maxDisplay&&e.clientConfiguration.maxDisplay>0&&n>=e.clientConfiguration.maxDisplay?o(`Campaign ${e.id} max display ${n} >= ${e.clientConfiguration.maxDisplay}`):s.includes(e.id)?o(`Campaign ${e.id} was already completed.`):a.includes(e.id)?o(`Campaign ${e.id} has been closed by the user, skipping it.`):e.inlineElementSelector?i.push(e):o(`Campaign ${e.id} is inline but doesn't have an element selector`)}}return i})(a);(d||c.length>0)&&(o("Loading SurveyJS in order to display campaigns"),l=!1,P((()=>{d&&L(d),E((()=>{})),k((async()=>{var t;K(d,g,e);for(const t of c)if(J(t)){o(`Displaying inline campaign ${t.id}`);const n=new Promise((n=>{X(t,g,e,(()=>{n(!0)}))}));await n}try{null===(t=u.autoRefreshInline)||void 0===t||t?ne():o("âŸ³ Inline survey auto-refresh disabled")}catch(e){s("Failed to setup mutation observer",e)}}))})))}if(l)try{null===(r=u.autoRefreshInline)||void 0===r||r?ne():o("âŸ³ Inline survey auto-refresh disabled")}catch(e){s("Failed to setup mutation observer",e)}}else o("Survey module is disabled!")},oe=async e=>{var t,i;o("Polarbyte Survey: Refreshing Inline surveys...");const r=null==m?void 0:m.survey;if(null!==(t=null==r?void 0:r.enabled)&&void 0!==t&&t){const t=null!==(i=null==r?void 0:r.apiHost)&&void 0!==i?i:"https://dev.polarbyte.com/webapps-api",a=null==r?void 0:r.projectName,l=d(),c=se();if(!a)return void s("Survey module is enabled, but no project is configured");if(navigator.userAgent.toLowerCase().includes("headless"))return void o(`The browser is in headless mode; disabling surveys (${navigator.userAgent})`);const u={url:window.location.href,device:V(),pageViews:c,...null==r?void 0:r.userAttributes};Y(u,m),l&&l.domain_userid&&(u.domain_userid=l.domain_userid),W()&&(u.prelive=!0);let p=ee;if(void 0===p||!0===e?(p=await h(t,a,u),ee=p):o("Using cached campaigns"),p&&p.campaigns){const e=(e=>{var t;if(e){const i=q(),s=B(),r=H(),a=e.filter((e=>e.campaignType===n.INLINE));for(const e of a){const n=null!==(t=s[e.id])&&void 0!==t?t:0;if(e.clientConfiguration.maxDisplay&&e.clientConfiguration.maxDisplay>0&&n>=e.clientConfiguration.maxDisplay)o(`Campaign ${e.id} max display ${n} >= ${e.clientConfiguration.maxDisplay}`);else if(i.includes(e.id))o(`Campaign ${e.id} was already completed.`);else if(r.includes(e.id))o(`Campaign ${e.id} has been closed by the user, skipping it.`);else if(e.inlineElementSelector){if(J(e))return e}else o(`Campaign ${e.id} is inline but doesn't have an element selector`)}}return null})(p.campaigns);e&&P((()=>{E((()=>{})),k((()=>{X(e,t,u)}))}))}}else o("Survey module is disabled!")},se=()=>{let e=0;if(l("sessionStorage")){const t=window.sessionStorage.getItem("pbspv");if(t)try{e=parseInt(t,16),isNaN(e)&&(e=0)}catch(e){s("Failed to retrieve page views from session",e)}}return e},re=()=>{return e=u,window.polarbyte&&null!==(t=window.polarbyte[e])&&void 0!==t?t:"";var e,t};return(async()=>{o("Polarbyte Survey: Pre-init..."),(e=>{o("waitForOneTrustCMP");const t=()=>{if(window.OneTrust.IsAlertBoxClosed())return o("waitForOneTrustCMP: OneTrust alert box closed"),void e();o("Setting up OTConsentApplied listener"),window.addEventListener("OTConsentApplied",(()=>{o("waitForOneTrustCMP: OTConsentApplied"),e()}),{once:!0})};if(window.OneTrustStub){o("OneTrust is still loading...");const e=setInterval((()=>{window.OneTrust&&window.OneTrust.IsAlertBoxClosed&&(window.clearInterval(e),t())}),100)}else window.OneTrust&&window.OneTrust.IsAlertBoxClosed?(o("OneTrust detected"),t()):(o("OneTrust not detected"),e())})((()=>{ie().catch((e=>{s("Failed to initialize Survey module",e)}))}))})().catch((e=>{s("Failed to initialize Polarbyte surveys.",e)})),{name:u,getVersion:re,refreshInline:oe}}();
